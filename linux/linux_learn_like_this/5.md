## 存储结构与磁盘划分



### 一切从 "/" 开始

Linux 系统中的一切文件都是从 “根（/）” 目录开始，并且按照 FHS（Filesystem Hierarchy Standard）树形结构来存放文件，以及每个目录都有它的用途，另外还严格区分大小写，例如 root、rOOt、Root 分别代表不同的目录，所以文件名称中也不得包含斜杠（/）。目录结构图如下：

<img src="https://pcloud-1258173945.cos.ap-guangzhou.myqcloud.com/uPic/pY4Gun.png" alt="Linux跟目录结构" style="zoom: 50%;" />



FHS 根据开发者的经验总结出来的。是一种文件存放的道德的约束（不严格要求一定遵守），开发者也可以根据自己的实际情况灵活调整，不比认准 FHS 协定，以下是 FHS 常见目录的职责区分：

<img src="https://pcloud-1258173945.cos.ap-guangzhou.myqcloud.com/uPic/fThiQo.png" alt="FHS目录职责" style="zoom: 33%;" />



### 物理设备的命名规则

Linux 系统一切都是文件，所有只能通过文件命名规范来让用户区分文件类型（或者文件后缀），常见的设备文件都会放在 /dev 目录下，他们分别的命名方式是：

<img src="https://pcloud-1258173945.cos.ap-guangzhou.myqcloud.com/uPic/image-20210620090815255.png" alt="image-20210620090815255" style="zoom:50%;" />

不过现在的 IDE 设备已经很少，大多硬盘设备都是 "/dev/sd" 开头的，后面关于很多硬盘设备和分区的基础知识，这里就不概述了，因为很少操作，而且大多数的云服务商已经提供相应的基础设施，所以没有深究的必要性。包括后面描述的文件系统相关的知识，也只是大概知道和了解就好，如果真的用到再回来查也不迟。



### 文件系统与数据资料

Linux 系统支持数十种文件系统，常见的文件系统如下所述：

* Ext3：日志文件系统，避免资料丢失，容量越大修复时间越长。而且不能百分百保证资料找回
* Ext4：Ext3 的改进版本，是 RHEL 6 系统的默认文件管理系统，存储支持高达 1EB，相比 Ext3 效率高得多
* XFS：一种高性能日志文件，是 RHEL 7 中默认文件系统，优势是宕机后文件可以快速恢复，开销极低，支持容量高达 18EB
* …………



在计算机的发展过程中产生很多的文件系统，Linux 内核提供 VFS（Virtual File System 虚拟文件接口）对硬盘进行统一操作，可以让用户无需关心底层的文件系统差异，日常感受就是 “文件系统都是一样的”，可以随意使用命令操作各种文件（例如：cp、mv、rm 等操作），大大降低系统使用门槛，以下是 VFS 架构示意图：

<img src="https://pcloud-1258173945.cos.ap-guangzhou.myqcloud.com/uPic/image-20210620092121286.png" alt="VFS 架构示意图" style="zoom:50%;" />



### 挂载硬件设备

在 Wundows 中插入光驱，U 盘总会自动识别，但是其中都是操作系统帮你做了大部分的事情，不同的是，在 Linux 中对于外接设备需要进行以下三步才能正常使用：

* 分区
* 格式化
* 挂载（把外接设备跟文件目录关联）



实际工作中对于挂载硬件的使用场景并不多，所以简单描述一下关于挂载和磁盘管理的几个命令即可：

1. mount 命令：用于挂载文件系统
2. unmount 命令：用于撤销已经挂载的设备文件
3. fdisk 命令：用于管理磁盘分区的一站式服务（添加、删除、转换分区等功能）
4. du 命令：评估文件数据占用情况，例如：使用 `du -sh /*` 查看系统数据使用情况



另外 Linux 还有很多磁盘命令例如：教皇分区、容量配额、软硬方式链接等，目前不常用所以就描述了。



